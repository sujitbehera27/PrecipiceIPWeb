<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>QuickStart Bootstrap</title>
<meta name="author" content="">
<!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> -->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=yes">
<!-- Place favicon.ico in the root directory -->

<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="css/app.css">

</head>

<body ng-app="loginRegApp">
	<!-- Content -->
	<!--    <div class="make-it-fit">-->
	<div class="make-it-fit">
		<div class="form" ng-controller="loginController">
		<!--<div  ng-app="mainApp" ng-controller="ipController" > -->
			<div class="tab-content">
				<div id="login"   ng-show="show=='false'">
					<h3 style="margin-top: 0px;">Welcome Back! Please Login</h3>

				<form id="loginForm">
					<div class="field-wrap">
						<!-- <label> User Id<span class="req">*</span></label>  -->
						<input type="text" ng-model="loginRegistartion.emailID" placeholder="User ID*" required autocomplete="off" />
					</div>

					<div class="field-wrap">
						<!-- <label> Password<span class="req">*</span>
						</label> --> <input type="password" ng-model="loginRegistartion.password" placeholder="Password*" required autocomplete="off" />
					</div>

					<ul class="tab-group">
						<li class="tab active"><a href="#signup" ng-click="showRegDiv()" >New User? Sign	Up </a> <a href="#forgot" data-toggle="modal" data-target="#forgotPWModal">Forgot Password ?</a> </li>
						
					</ul>
					<!-- <button class="button button-block"	onclick="window.location= './views/reg1.html'">Log In</button> -->
					<button class="button button-block"	ng-click="loginSubmit()">Log In</button>
			</form>
		</div>
				
				<div id="signup" ng-hide="show == 'false'">
					<h1>Sign Up for Free</h1>
					<form >
						<div class="top-row">
							<div class="field-wrap">
								<!-- <label> First Name<span class="req">*</span></label> -->
								 <input type="text" ng-model="loginRegistartion.firstName" placeholder="First Name *"  required autocomplete="off" />
							</div>

							<div class="field-wrap">
								<!-- <label> Last Name<span class="req">*</span></label> -->
								 <input type="text" ng-model="loginRegistartion.lastName" placeholder="Last Name *"  required autocomplete="off" />
							</div>
						</div>

						<div class="field-wrap">
							<!-- <label> Email Address<span class="req">*</span></label>  -->
							<input type="email" ng-model="loginRegistartion.emailID"  placeholder="Email Address *" required autocomplete="off" />
						</div>

						<div class="field-wrap">
							<!-- <label> Set A Password<span class="req">*</span></label>  -->
							<input type="password" ng-model="loginRegistartion.password" placeholder="Set A Password *" required autocomplete="off" />
						</div>
						<ul class="tab-group">
							<li class="tab"><a href="#login" ng-click="showLoginDiv()">Log In</a></li>
						</ul>
						<button type="submit" ng-click="registration()" class="button button-block" >	Get Started	</button>
					</form>
				</div> 
				
				<!-- Forgot Password Modal -->
				    <div class="modal fade" id="forgotPWModal" tabindex="-1" role="dialog" aria-labelledby="forgotPWModalLabel" aria-hidden="true">
				       <div class="modal-dialog">
				        <div class="modal-content">
				         <div class="modal-header">
				          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x </button>
				          <h4 class="modal-title" id="forgotPWModalLabel"> Forgot Password ?</h4>
				         </div>
				         <div class="modal-body">
				         
				         <div class="top-row">
							<div class="field-wrap">
								<input type="text" ng-model="loginRegistartion.emailID" placeholder=" Email Id Please... " required autocomplete="off" />
							</div>

							<div class="field-wrap">
								<input type="text" placeholder="Name Please..." required autocomplete="off" />
							</div>
						</div>

				         </div>
				         <div class="modal-footer">
				         	<button type="submit"  ng-click="forgotPW()" class="button button-block" >	Reset Password	</button>
				         </div>
				        </div><!-- /.modal-content -->
				       </div><!-- /.modal-dialog -->
				    </div>
    			<!-- /.modal -->
    			
			</div>
			<!-- tab-content -->
		</div>
		<!-- /form -->
	</div>

	<!-- <script type="text/javascript" src="lib/jquery/jquery-2.1.3.min.js"></script>
	<script>
            window.jQuery || document.write('<script src="lib/jquery/jquery-2.1.3.min.js"><\/script>')
        </script> -->
	<script src="lib/jquery/jquery-2.1.3.min.js"></script>
	<script src="lib/angular/angular.min.js"></script>
	<script src="lib/bootstrap/js/bootstrap.min.js"></script>
	<!-- <script src="lib/angular/angular-route.js"></script> -->
	
	<!-- <script src="js/app.js"></script> -->

<script type="text/javascript">

	var application = angular.module('loginRegApp', []);
	
	application.controller('loginController', function($scope, $http, $location){
		
		//Hide & Seek : Login & Reg Div
		$scope.show = 'false';
		$scope.showRegDiv = function(){
			//$scope.show = $scope.show == 'false' ? 'true' : 'false';
			$scope.show = 'true';
			$scope.loginRegistartion = "";
		}
		$scope.showLoginDiv=function(){
	        $scope.show='false';
	        $scope.loginRegistartion = "";
	    }
		//Hide & Seek : End
		
		$scope.loginSubmit = function(){
			 $http.post("http://localhost:8080/PrecipiceIP/rest/user/login", $scope.loginRegistartion)
			 .success(function(response){
				 console.log("=======> " + response.firstName);
				 if(response.firstName != null){
						window.location= './views/reg1.html'
				 } else{
					alert("Invalid User Name or Password");
					$scope.loginRegistartion = "";
				 }
			 }); 
		}
		
		// Registration Service Call
		 $scope.registration = function(){
			$http.post("http://localhost:8080/PrecipiceIP/rest/user/registarion", $scope.loginRegistartion)
			 .success(function(response){
				 console.log("=======> " + response);
				 //TODO: Need to change
				 if(response != 0){
						window.location= './views/reg1.html'
				 } else{
					 alert("Registration failed. Try Again.");
					 $scope.loginRegistartion = "";
				 }
		 }); 
			 
		} 
		// Forgot Password Service Call
		/* $scope.forgotPW = function(){
			console.log("^^^^^^^^^^^^^^^^^^^^^^^^^"+ $scope.loginRegistartion.emailID +"\n and password: " + $scope.loginRegistartion.password);
			$http.post("http://localhost:8080/PrecipiceIP/rest/user/forgotPassword", $scope.loginRegistartion)  //TODO : Set the email ID Only.
			 .success(function(response){
				 console.log("=======> " + response);
			 });
		} */
	});
	
</script>
</body>